---
title: XFF
---

# XFF
## 正称
X-Forwarded-For（エックス フォワードド フォー、略称：XFFヘッダー）は、インターネットプロトコルで用いられる一般的なHTTPヘッダフィールドの1つ。通常、クライアントのIPアドレスをサーバに転送する際に使用される。

## 特徴
HTTPクライアントからWebサーバへ通信要求を出した際に、そのクライアントのIPアドレスを識別するために利用される。  
X-Forwarded-Forは次のような形式で記述されている。  

    X-Forwarded-For: client1, proxy1, proxy2

ここでは、左から順に、クライアント(client1)→プロキシ(proxy1)→プロキシ(proxy2)の順でデータが転送されたことを示している。  
また、クライアントが直接サーバに接続している場合は省略することもあり、次のような形式になっていく。  

    X-Forwarded-For: client1
 
## 応用例 
応用例としては以下が挙げられる。  
・ログ分析  
・セキュリティ対策  
・負荷分散  

　ログ分析では、サーバーへの接続元IPアドレスを調べたりする場合があり、XFFヘッダーを使ってその情報を取得することもできる。またセキュリティ対策では不正な接続元からの攻撃を防止する方法として使われている場合もある。さらに負荷分散の場合も同様であり、ユーザーの接続元IPアドレスから地理的な情報を取得して近くのサーバーへリクエストを転送することも可能となっている。  

 ## 注意点 
注意点としては以下が挙げられる。  
・不正なIPアドレスの挿入  

　不正なIPアドレスの挿入によって不正な情報が得られた場合もあり注意が必要だ。またセキュリティ上の問題も考えられやすくなってしまうので注意が必要だ。