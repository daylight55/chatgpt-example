

# X-Forwarded-For（XFF）
## 正称
X-Forwarded-For（XFF）は、HTTPプロトコルにおいてクライアントのIPアドレスをサーバーに通知するためのフィールドである。
## 特徴
通常、WebブラウザからWebサーバーへアクセスするとき、Webサーバーはそのアクセスを受信した際のIPアドレスを記録する。しかしながら、プロキシサーバーを経由する場合やNAT越しに接続されている場合などは、Webサーバーはクライアントの「本当」のIPアドレスを取得できない。この際、X-Forwarded-ForフィールドにプロキシサーバーやNAT Gatewayの管理下にあるIPアドレスを記入することで、Webサーバーはクライアントの「本当」のIPアドレスを取得することができる。また、複数の経由先を経由して接続されている場合は、フィールドの値にはコンマ区切りで複数の値を記述することができる。
## 応用例
X-Forwarded-Forフィールドの値を使用してユーザーの接続元地域を判定することができる。また、不正な接続の可能性がありそうなIPアドレスからの接続をブロックすることも可能だ。
## 注意点
ただし、X-Forwarded-Forフィールドの値は改竄されやすく、信頼できない情報と考えられているため注意が必要だ。また、プロキシサーバーやNAT Gatewayの管理下にありそうなIPアドレス以外の値も書かれていた場合も無視されてしまう可能性があり注意が必要だ。
## 関連用語
* プロキシサーバー：インターネット上のネットワーク間の通信を行う際に中継役となって通信を行うコンピュータのこと。
* NAT Gateway：一般的なインターネット接続方式であるNAT（Network Address Translation）方式の管理ツールのこと。