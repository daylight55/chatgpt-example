

# ICMP
## 正称
Internet Control Message Protocol（インターネット制御メッセージプロトコル、略称：ICMP）は、IPネットワーク上でホスト間のエラーや疎通確認を行うためのプロトコルである。RFC 792によって定義されている。  
## 特徴
ICMPはIPv4とIPv6で使用される。通常、IPパケットに対する応答として使用される。ただし、ICMPパケットはトランスポート層プロトコル（TCPやUDPなど）を伴うこともある。  
IPヘッダの「プロトコル」フィールドに1を指定することで、ICMPパケットを送信することができる。また、RFC792ではチェックサムを使用してデータの整合性を確認することが求められていたが、RFC1071ではチェックサムの算出方法が明記されており、RFC791(IP)のチェックサムの算出方法と同じものとなっている。  
## 応用例
### Ping
PingコマンドはICMP ECHO要求/ECHO応答メッセージを利用して、相手ホストからの応答があるかどうかを調べられます。  
### Traceroute
TracerouteコマンドはICMPタイムスタンプ要求/タイムスタンプ応答メッセージを利用して、相手ホストまでの経路(ルート)を調べられます。  
## 注意点・関連用語
### ファイアウォール
ファイアウォールにおいて ICMP に対するパケットフィルタリング はセキュリティ上の重要な役割を果たすことから多くの場合有効化されていない。  
### MTU (Maximum Transmission Unit) 
MTUは1回の転送単位(フレーム)の最大サイズであり、ICMP パケットの最大サイズは MTU - IPヘッダ - ICMPヘッダ の長さに制限されます。